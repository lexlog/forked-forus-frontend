- var src_prefix = (qdt_c.platform.env_data.html5ModeEnabled?qdt_c.platform.env_data.html5Mode.basePath:'');

top-navbar

section: .wrapper 
    .block.block-sign_up: .block-wrapper
        .block-title(i18n="fund_request.sign_up.header.main" i18n-vars="{fundname: ($ctrl.fund.name | capitalize)}")

        div(ng-if="$ctrl.state == 'fund_already_applied'")
            .sign_up-pane    
                .sign_up-pane-header(translate="fund_request.sign_up.header.title_fund_already_applied")

                .sign_up-pane-body
                    .sign_up-pane-media: img(src="./assets/img/fund-request-error.png")
                    p.sign_up-pane-text(translate="fund_request.sign_up.subtitles.fund_already_applied")
                    
                    ul.sign_up-pane-list.sign_up-pane-list-criteria: li(
                        ng-repeat="critera in $ctrl.fund.criteria" 
                        ng-class="{pending: 'item-progress', approved: 'item-valid', 'declined' : 'item-declined'}[critera.request_state]")
                        .item-icon: em.mdi(
                            ng-class="{pending: 'mdi-help', approved: 'mdi-check-bold', 'declined' : 'mdi-close-thick'}[critera.request_state]")
                        span(ng-if="critera.title" ng-bind="critera.title")
                        span(
                            ng-if="!critera.title"
                            i18n="fund_request.sign_up.pane.criterion_{{{ '>' : 'more', '<' :'less', '=': 'same' }[critera.operator]}}" 
                            i18n-vars="{name: critera.record_type_name, value: ($ctrl.criterionValuePrefix[critera.record_type_key]) + critera.value}")
                    span(translate="fund_request.sign_up.pane.fund_already_applied")    

        //- DigiD login
        div(ng-if="$ctrl.state == 'digid_login'")
            .sign_up-pane
                .sign_up-pane-header(i18n="fund_request.sign_up.header.title_log_digid") 
                .sign_up-pane-body(ng-class="{'sign_up-pane-body-padless-bottom': !$ctrl.digidMandatory && $ctrl.fund.allow_fund_requests}")
                    .sign_up-pane-text(translate="fund_request.sign_up.subtitles.log_digid")
                    
                    .sign_up-pane-digid
                        button.digid-button(type="button" ng-click="$ctrl.startDigId()") Log in met DigiD
                        img.digid-image(src=src_prefix + "./assets/img/icon-digid.svg")

                    .sign_up-pane-link(
                        ng-if="$ctrl.fund.allow_prevalidations"
                        ng-click="$ctrl.state = 'pincode_activate'") I have an activation code
                
                .sign_up-pane-footer(ng-if="!$ctrl.digidMandatory && $ctrl.fund.allow_fund_requests"): .row
                    .col.col-lg-6.col-xs-6.text-left &nbsp;
                    .col.col-lg-6.col-xs-6.text-right: .button.button-text.button-text-padless(ui-sref="fund-request({fund_id: $ctrl.fund.id})")
                        em.mdi.mdi-chevron-right.icon-right
                        | Overslaan

        //- DigiD login
        div(ng-if="$ctrl.state == 'pincode_activate'")
            .sign_up-pane
                .sign_up-pane-header Vul uw activatiecode in
                .sign_up-pane-body(ng-class="{'sign_up-pane-body-padless-bottom': !$ctrl.digidMandatory && $ctrl.fund.allow_fund_requests}")
                    form.form(ng-submit="$ctrl.activateCodeForm.submit()")
                        .form-group.text-center
                            .form-label(i18n="popup_auth.input.code")
                            pincode-control(
                                ng-model="$ctrl.activateCodeForm.values.code" 
                                block-size="4" 
                                block-count="2" 
                                block-input-type="alphanum").block-pincode-compact
                            .form-error(ng-repeat="error in $ctrl.activateCodeForm.errors.code" ng-bind="error")
                        .form-group
                        .form-group.text-center: button(
                            type="submit" 
                            i18n="popup_auth.buttons.submit" 
                            ng-class="($ctrl.activateCodeForm.values.code.length != 8 || !$ctrl.activateCodeForm.enabled) ? 'button-disabled' : ''").button.button-primary

                    .text-center: .sign_up-pane-link(
                        ng-if="$ctrl.digidAvailable"
                        ng-click="$ctrl.state = 'digid_login'") Log in met DigiD
                
                .sign_up-pane-footer(ng-if="!$ctrl.digidMandatory && $ctrl.fund.allow_fund_requests"): .row
                    .col.col-lg-6.col-xs-6.text-left &nbsp;
                    .col.col-lg-6.col-xs-6.text-right: .button.button-text.button-text-padless(ui-sref="fund-request({fund_id: $ctrl.fund.id})")
                        em.mdi.mdi-chevron-right.icon-right
                        | Overslaan