top-navbar
section.section.section-profile: .wrapper
    //- Breadcrumbs
    .block.block-breadcrumbs
        a(ui-sref="home").breadcrumb-item Home
        a(translate="reimbursements.header.title" ui-sref="reimbursements").breadcrumb-item
        .breadcrumb-item.active(aria-current="location") Nieuwe declaratie

    //- Page
    .block.block-profile
        //- Menu
        .profile-aside: profile-menu.hide-sm

        //- Page content
        .profile-content
            //- Header
            .profile-content-header
                .profile-content-title(ng-if="!$ctrl.reimbursement") Nieuwe declaratie
                .profile-content-title(ng-if="$ctrl.reimbursement") Declaratienummer: {{ '#' + $ctrl.reimbursement.code  }}
            
            //- No email warning
            .card(ng-if="!$ctrl.reimbursement && !$ctrl.identity.email && !$ctrl.identity.skipEmail")
                .card-section
                    .card-title: strong You currently have no email address
                    .card-text 
                        | If the sponsor has questions, they cannot contact you.
                        br
                        | Or, if for some reason you can't add an email address, consider adding contact information in the description field.
                        br
                        br
                    .card-text
                        .button.button-primary.button-sm(ui-sref="identity-emails") Add email
                        .button.button-text.button-sm(ng-click="$ctrl.identity.skipEmail = true") Continue without email

            //- Form
            .card(ng-if="$ctrl.reimbursement || $ctrl.identity.email || $ctrl.identity.skipEmail"): form(
                    ng-submit="$ctrl.submit()").form.form-compact.form-compact-flat

                .card-section
                    //- Invoices uploader
                    file-uploader(
                        type="reimbursement_proof"
                        files="$ctrl.files"
                        accept="$ctrl.fileUploaderAccept"
                        crop-media="true"
                        multiple="true"
                        multiple-size="10"
                        make-preview="true"
                        file-list-compact="false"
                        result-image-size="file.size"
                        on-file-removed="$ctrl.onFileInfo(file, files)"
                        on-file-resolved="$ctrl.onFileInfo(file, files)"
                        on-file-uploaded="$ctrl.onFileUploaded(file, files)"
                        on-file-batch-queued="$ctrl.onFileInfo(file, files)")
                    
                    .text-center(ng-if="$ctrl.form.errors.files")
                        br
                        .form-error(ng-repeat="error in $ctrl.form.errors.files" ng-bind="error")

                .card-section: .row: .col.col-xs-12.col-md-10
                    .form-group.form-group-inline
                        label(for="voucher_id").form-label VOUCHER
                        .form-offset
                            select-control(
                                id="voucher_id"
                                as="address"
                                prop="id"
                                search="false"
                                ng-model="$ctrl.form.values.voucher_id"
                                ng-change="$ctrl.updateSortBy()"
                                options="$ctrl.vouchers"
                                template="select-control-voucher"
                                placeholder="SELECT VOUCHER")
                            .form-error(ng-repeat="error in $ctrl.form.errors.voucher_address" ng-bind="error")

                .card-section: .row: .col.col-xs-12.col-md-10
                    //- Title
                    .form-group.form-group-inline
                        label(for="title").form-label TITEL VAN DECLARATIE
                        input(name="title" type="text" ng-model="$ctrl.form.values.title" placeholder="TITEL VAN DECLARATIE").form-control
                        .form-error(ng-repeat="error in $ctrl.form.errors.title" ng-bind="error")
                    
                    //- Amount
                    .form-group.form-group-inline 
                        label(for="amount").form-label BEDRAG €
                        input(type="number" step=".01" min="0.01" ng-model="$ctrl.form.values.amount" placeholder="BEDRAG €").form-control
                        .form-error(ng-repeat="error in $ctrl.form.errors.amount" ng-bind="error")
                    
                    //- Description
                    .form-group.form-group-inline
                        label(for="description").form-label OPMERKING
                        textarea(ng-model="$ctrl.form.values.description" placeholder="OPMERKING" resize="vertical").form-control
                        .form-error(ng-repeat="error in $ctrl.form.errors.description" ng-bind="error")
                    
                    //- IBAN
                    .form-group.form-group-inline
                        label(for="iban").form-label IBAN NUMMER
                        input(type="text" ng-model="$ctrl.form.values.iban" placeholder="IBAN NUMMER").form-control
                        .form-error(ng-repeat="error in $ctrl.form.errors.iban" ng-bind="error")

                    //- IBAN Name
                    .form-group.form-group-inline
                        label(for="iban").form-label TE NAAM STELLING VAN
                        input(type="text" ng-model="$ctrl.form.values.iban_name" placeholder="TE NAAM STELLING VAN").form-control
                        .form-error(ng-repeat="error in $ctrl.form.errors.iban_name" ng-bind="error")

                .card-section: .flex.flex-horizontal
                    //- Cancel
                    .flex.hide-sm
                        button(
                            type="button" 
                            ng-disabled="$ctrl.form.locked" 
                            ui-sref="reimbursements").button.button-dim.button-sm Annuleren

                    //- Submit
                    .flex.flex-grow.flex-end: .button-group
                        //- Save for later
                        button(
                            type="submit" 
                            ng-disabled="$ctrl.form.locked").button.button-primary-outline.button-sm Opslaan voor later

                        //- Submit now
                        button(
                            type="button" 
                            ng-click="$ctrl.submit(true)"
                            ng-disabled="$ctrl.submitAvailable($ctrl.form.values, $ctrl.files)"
                            ).button.button-primary.button-sm Indienen