- var src_prefix = (qdt_c.platform.env_data.html5ModeEnabled?qdt_c.platform.env_data.html5Mode.basePath:'');

.modal.modal-physical-cards.modal-animated(ng-class="[$ctrl.modal.scope.modalClass, $ctrl.modalClass, $ctrl.modal.loaded ? '' : 'modal-loading']")
    .modal-backdrop(ng-click="$ctrl.close()")
    
    //- Select type
    .modal-window(ng-if="$ctrl.state == 'select_type'"): form.form(ng-submit="$ctrl.form.submit()")
        .modal-close.mdi.mdi-close(ng-click="$ctrl.close()")
        .modal-header
            .modal-title(translate="physical_card.modal_section.type_selection.title")
            .modal-subtitle(translate="physical_card.modal_section.type_selection.subtitle")
        .modal-body: .modal-section
            .physical-card: .physical-card-row
                .physical-card-item
                    .physical-card-item-title(translate="physical_card.modal_section.type_selection.card_old.title")
                    .physical-card-item-inner(ng-click="$ctrl.choosePhysicalCardType('old')")
                        .physical-card-item-icon: include ../../../resources/_webshop-common/assets/img/icon-physical-cards/icon-physical-card-code.svg
                    .physical-card-item-description(translate="physical_card.modal_section.type_selection.card_old.description")
                
                .physical-card-item
                    .physical-card-item-title(translate="physical_card.modal_section.type_selection.card_new.title")
                    .physical-card-item-inner(ng-click="$ctrl.choosePhysicalCardType('new')")
                        .physical-card-item-icon: include ../../../resources/_webshop-common/assets/img/icon-physical-cards/icon-physical-card-envelope.svg
                    .physical-card-item-description(translate="physical_card.modal_section.type_selection.card_new.description")

    //- Activation code form
    .modal-window(ng-if="$ctrl.state == 'card_code'")
        .modal-close.mdi.mdi-close(ng-click="$ctrl.close()")
        .modal-header
            .modal-title(translate="physical_card.modal_section.link_card.title")
        .modal-body: .modal-section
            form.form
                .activation-card
                    .physical-card-title(translate="physical_card.modal_section.link_card.subtitle")
                    pincode-control(
                        ng-model="$ctrl.activateCodeForm.values.code" 
                        block-size="4" 
                        block-count="3" 
                        block-input-type="num"
                        cant-delete-length="4").block-pincode-compact
                    .form-error.text-center(ng-repeat="error in $ctrl.activateCodeForm.errors.code" ng-bind="error")

                    .physical-card-media: img(src=src_prefix + "./assets/img/icon-physical-cards/icon-physical-cards-preview.png")
                    .physical-card-description(translate="physical_card.modal_section.link_card.description")

                    .text-center: button.button.button-dark(
                        ng-class="{disabled: $ctrl.activateCodeForm.values.code.length != 12}"
                        type="button" 
                        i18n="physical_card.buttons.link_card.submit_code" 
                        ng-click="$ctrl.submitActivationCode()")
    
    //- Digital password
    .modal-window(ng-if="$ctrl.state == 'digital_pass'"): form.form
        .modal-close.mdi.mdi-close(ng-click="$ctrl.close()")
        .modal-header
            .modal-title(translate="physical_card.modal_section.request_new_card.title")
            .modal-subtitle(translate="physical_card.modal_section.request_new_card.subtitle")
        .modal-body 
            .modal-section
                .physical-card: .physical-card-row
                    .physical-card-item.physical-card-item-sm(ng-click="$ctrl.sendVoucherEmail()")
                        .physical-card-item-inner
                            .physical-card-item-icon: include ../../../resources/_webshop-common/assets/img/physical-card-email.svg
                        .physical-card-item-title(translate="physical_card.modal_section.request_new_card.email_to_me")
                    .physical-card-item.physical-card-item-sm(ng-click="$ctrl.printQrCode()")
                        .physical-card-item-inner
                            .physical-card-item-icon: include ../../../resources/_webshop-common/assets/img/physical-card-print.svg
                        .physical-card-item-title(translate="physical_card.modal_section.request_new_card.print_pass")
                    .physical-card-item.physical-card-item-sm(ng-click="$ctrl.openInMeModal()")
                        .physical-card-item-inner
                            .physical-card-item-icon: include ../../../resources/_webshop-common/assets/img/physical-card-open-app.svg
                        .physical-card-item-title(translate="physical_card.modal_section.request_new_card.open_in_app")

                .order-block(ng-if="!$ctrl.preffersPlasticCard")
                    .physical-card-description(translate="physical_card.modal_section.request_new_card.preffer_plastic_card")
                    .text-center: button.button.button-dark(
                        type="button" 
                        translate="physical_card.buttons.request_new_card.order_by_email" 
                        ng-click="$ctrl.prefferPlasticCard()")
            
            .modal-section(ng-if="$ctrl.preffersPlasticCard")
                .order-block(ng-if="$ctrl.preffersPlasticCard")
                    .physical-card-description(translate="physical_card.modal_section.request_new_card.order")
                    .row: .col.col-sm-8.col-sm-offset-2: form.form
                        .form-group
                            label.form-label(translate="physical_card.modal_section.request_new_card.postcode")
                            input(
                                type="text" 
                                placeholder="Bijv. 9712RG"
                                ng-model="$ctrl.requestPhysicalCardForm.values.postcode" step=".01" min="0.01").form-control
                            .form-error(ng-repeat="error in $ctrl.requestPhysicalCardForm.errors.postcode" ng-bind="error")

                        .form-group
                            label.form-label(translate="physical_card.modal_section.request_new_card.house_number")
                            input(
                                type="text" 
                                placeholder="Bijv. 47a"
                                ng-model="$ctrl.requestPhysicalCardForm.values.house_number" step=".01" min="0.01").form-control
                            .form-error(ng-repeat="error in $ctrl.requestPhysicalCardForm.errors.house_number" ng-bind="error")
                    .physical-card-media.physical-card-media-sm
                        img(src=src_prefix + "./assets/img/icon-physical-cards/icon-physical-cards-preview-variant.png")

                .text-center: button.button.button-dark(type="button" translate="physical_card.buttons.request_new_card.confirm" ng-click="$ctrl.requestCard()")    

    //- Success old card
    .modal-window(ng-if="$ctrl.state == 'success_old_card'")
        .modal-close.mdi.mdi-close(ng-click="$ctrl.close()")
        .modal-header: .modal-title(translate="physical_card.modal_section.link_card_success.title")
        .modal-body: .modal-section
            .physical-card-media: include ../../../resources/_webshop-common/assets/img/icon-physical-cards/icon-physical-cards-success.svg
            .physical-card-description(i18n="physical_card.modal_section.link_card_success.description" i18n-vars="{ fundName: $ctrl.voucher.fund.name }")        
            .text-center: button.button.button-dark(type="button" ng-click="$ctrl.close()" i18n="physical_card.buttons.close")   

    //- Success new card
    .modal-window(ng-if="$ctrl.state == 'success_new_card'")
        .modal-close.mdi.mdi-close(ng-click="$ctrl.close()")
        .modal-header: .modal-title(translate="physical_card.modal_section.request_card_success.title")
        .modal-body: .modal-section
            .physical-card-media: include ../../../resources/_webshop-common/assets/img/icon-physical-cards/icon-physical-cards-success.svg
            .physical-card-description(i18n="physical_card.modal_section.request_card_success.description" i18n-vars="{ fundName: $ctrl.voucher.fund.name }")
            .text-center: button.button.button-dark(type="button" ng-click="$ctrl.close()" i18n="physical_card.buttons.close")